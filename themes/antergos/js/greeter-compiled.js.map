{"version":3,"sources":["greeter.js"],"names":[],"mappings":"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","file":"greeter-compiled.js","sourcesContent":["/*\n *\n * Copyright Â© 2015-2016 Antergos\n *\n * greeter.js\n *\n * This file is part of lightdm-webkit-theme-antergos\n *\n * lightdm-webkit-theme-antergos is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License,\n * or any later version.\n *\n * lightdm-webkit-theme-antergos is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * The following additional terms are in effect as per Section 7 of this license:\n *\n * The preservation of all legal notices and author attributions in\n * the material or in the Appropriate Legal Notices displayed\n * by works containing it is required.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * This is used to access our classes from within jQuery callbacks.\n */\nvar _self = null,\n\t_bg_self = null;\n\n\n/**\n * Capitalize a string.\n *\n * @returns {string}\n */\nString.prototype.capitalize = function() {\n\treturn this.charAt( 0 ).toUpperCase() + this.slice( 1 );\n};\n\n\n\n\n\n\n/**\n * This is the base class for the theme's components.\n */\nclass GreeterThemeComponent {\n\n\tconstructor() {\n\t\tthis.debug = true;\n\t\tthis.lang = window.navigator.language.split( '-' )[ 0 ].toLowerCase();\n\t\tthis.translations = window.ant_translations;\n\n\t\tif ( 'undefined' === typeof window.navigator.languages ) {\n\t\t\twindow.navigator.languages = [ window.navigator.language ];\n\t\t}\n\n\t\tthis.init_config_values();\n\t}\n\n\n\t/**\n\t * Add text to the debug log element (accessible from the login screen).\n\t *\n\t * @param {string} text - To be added to the log.\n\t */\n\tlog( text ) {\n\t\tif ( true === this.debug ) {\n\t\t\tconsole.log( text );\n\t\t}\n\t\t$( '#logArea' ).append( `${text}<br/>` );\n\t}\n\n\n\t/**\n\t * Get a key's value from localStorage. Keys can have two or more parts.\n\t * For example: \"ant:user:john:session\".\n\t *\n\t * @param {...string} key_parts - Strings that are combined to form the key.\n\t */\n\tcache_get( ...key_parts ) {\n\t\tvar key = `ant`;\n\n\t\tfor ( var part of key_parts ) {\n\t\t\tkey += `:${part}`;\n\t\t}\n\t\treturn localStorage.getItem( key );\n\t}\n\n\n\t/**\n\t * Set a key's value in localStorage. Keys can have two or more parts.\n\t * For example: \"ant:user:john:session\".\n\t *\n\t * @param {string} value - The value to set.\n\t * @param {...string} key_parts - Strings that are combined to form the key.\n\t */\n\tcache_set( value, ...key_parts ) {\n\t\tvar key = `ant`;\n\n\t\tfor ( var part of key_parts ) {\n\t\t\tkey += `:${part}`;\n\t\t}\n\t\treturn localStorage.setItem( key, value );\n\t}\n\n\n\t/**\n\t * Get some values from `lightdm-webkit2-greeter.conf` and save them for later.\n\t */\n\tinit_config_values() {\n\t\tvar logo = '', user_image = '', background_images = [], background_images_dir = '';\n\n\t\tif ( 'undefined' !== typeof config ) {\n\t\t\tif ( this instanceof AntergosTheme ) {\n\t\t\t\tlogo = config.get_str( 'branding', 'logo' ) || '';\n\t\t\t\tuser_image = config.get_str( 'branding', 'user_image' ) || '';\n\n\t\t\t} else if ( this instanceof AntergosBackgroundManager ) {\n\t\t\t\tbackground_images_dir = config.get_str( 'branding', 'background_images' ) || '';\n\t\t\t\tif (background_images_dir) {\n\t\t\t\t\tbackground_images = greeterutil.dirlist(background_images_dir) || [];\n\t\t\t\t}\n\n\t\t\t\tif (background_images.length) {\n\t\t\t\t\tlet images = [];\n\t\t\t\t\tfor (var file of background_images) {\n\t\t\t\t\t\tif (file.match(/(png|PNG)|(jpg|JPEG)|(bmp|BMP)/)) {\n\t\t\t\t\t\t\timages.push(file);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbackground_images = images;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.logo = logo;\n\t\tthis.user_image = user_image;\n\t\tthis.background_images = background_images;\n\t\tthis.background_images_dir = background_images_dir;\n\t}\n}\n\n\n\n\n\n\n/**\n * This class handles the theme's background switcher.\n */\nclass AntergosBackgroundManager extends GreeterThemeComponent {\n\n\tconstructor() {\n\t\tsuper();\n\t\tif ( null === _bg_self ) {\n\t\t\t_bg_self = this;\n\t\t}\n\n\t\tthis.current_background = this.cache_get( 'background_manager', 'current_background' );\n\n\t\tif ( ! this.background_images_dir.length || ! this.background_images.length ) {\n\t\t\tthis.log('AntergosBackgroundManager: [ERROR] No background images detected.');\n\n\t\t\t$( '.header' ).fadeTo( 300, 0.5, function() {\n\t\t\t\t$( '.header' ).css( \"background\", '#000000' );\n\t\t\t} ).fadeTo( 300, 1 );\n\n\t\t}\n\t\treturn _bg_self;\n\t}\n\n\n\tinitialize() {\n\t\tif ( ! this.current_background ) {\n\t\t\t// For backwards compatibility\n\t\t\tif ( null !== localStorage.getItem( 'bgsaved' ) && '0' === localStorage.getItem( 'bgrandom' ) ) {\n\t\t\t\tthis.current_background = localStorage.getItem( 'bgsaved' );\n\t\t\t\tthis.cache_set( this.current_background, 'background_manager', 'current_background' );\n\t\t\t\tlocalStorage.removeItem( 'bgrandom' );\n\t\t\t\tlocalStorage.removeItem( 'bgsaved' );\n\t\t\t} else if ( '0' === localStorage.getItem( 'bgrandom' ) ) {\n\t\t\t\tthis.current_background = this.get_random_image();\n\t\t\t\tthis.cache_set( 'true', 'background_manager', 'random_background' );\n\t\t\t\tlocalStorage.removeItem( 'bgrandom' );\n\t\t\t}\n\t\t}\n\n\t\tif ( ! this.current_background ) {\n\t\t\t// For current and future versions\n\t\t\tlet current_background = this.cache_get('background_manager', 'current_background' ),\n\t\t\t\trandom_background = this.cache_get('background_manager', 'random_background' );\n\n\t\t\tif ( 'true' === random_background || ! current_background ) {\n\t\t\t\tcurrent_background = this.get_random_image();\n\t\t\t\tthis.cache_set( 'true', 'background_manager', 'random_background' );\n\t\t\t}\n\n\t\t\tthis.current_background = current_background;\n\t\t\tthis.cache_set( this.current_background, 'background_manager', 'current_background' );\n\t\t}\n\n\t\tthis.do_background();\n\t}\n\n\n\tdo_background() {\n\t\tif ('undefined' !== typeof this.current_background) {\n\t\t\t$( '.header' ).fadeTo( 300, 0.5, function() {\n\t\t\t\tvar tpl = `url(${this.current_background})`;\n\t\t\t\t$( '.header' ).css(\"background-image\", tpl );\n\t\t\t} ).fadeTo( 300, 1 );\n\t\t}\n\t}\n\n\n\tget_random_image() {\n\t\tvar random_bg;\n\n\t\trandom_bg = Math.floor( Math.random() * this.background_images.length );\n\n\t\treturn this.background_images[ random_bg ];\n\t}\n\n\tsetup_background_thumbnails() {\n\t\tif (this.background_images.length) {\n\t\t\tfor ( var image_file of this.background_images ) {\n\t\t\t\tvar $link = $('<a href=\"#\"><img>'),\n\t\t\t\t\t$img_el = $link.children('img'),\n\t\t\t\t\ttpl = `file://${image_file}`;\n\n\t\t\t\t$link.addClass('bg clearfix').attr('data-img', tpl);\n\t\t\t\t$img_el.attr('src', tpl);\n\n\t\t\t\t$link.appendTo($('.bgs')).click( this.background_selected_handler );\n\t\t\t}\n\t\t}\n\t}\n\n\n\tbackground_selected_handler( event ) {\n\t\tvar img = $(this).attr('data-img');\n\n\t\tif ('random' === img) {\n\t\t\t_bg_self.cache_set('true', 'background_manager', 'random_background' );\n\t\t\timg = _bg_self.get_random_image();\n\t\t}\n\n\t\t_bg_self.cache_set(img, 'background_manager', 'current_background' );\n\t\t_bg_self.current_background = img;\n\n\t\t_bg_self.do_background();\n\n\t}\n}\n\n\n\n\n\n/**\n * This is the theme's main class object. It contains almost all the theme's logic.\n */\nclass AntergosTheme extends GreeterThemeComponent {\n\n\tconstructor() {\n\t\tsuper();\n\t\tif ( null === _self ) {\n\t\t\t_self = this;\n\t\t}\n\t\tthis.tux = 'img/antergos-logo-user.png';\n\t\tthis.user_list_visible = false;\n\t\tthis.auth_pending = false;\n\t\tthis.selected_user = null;\n\t\tthis.$user_list = $( '#user-list2' );\n\t\tthis.$session_list = $( '#sessions' );\n\t\tthis.$clock_container = $( '#collapseOne' );\n\t\tthis.$clock = $( \"#current_time\" );\n\t\tthis.$actions_container = $( \"#actionsArea\" );\n\t\tthis.$msg_area_container = $( '#statusArea' );\n\t\tthis.$msg_area = $( '#showMsg' );\n\t\tthis.background_manager = new AntergosBackgroundManager();\n\n\t\tthis.background_manager.initialize();\n\t\tthis.initialize();\n\n\t\treturn _self;\n\t}\n\n\tinitialize() {\n\t\tthis.prepare_translations();\n\t\tthis.do_static_translations();\n\t\tthis.initialize_clock();\n\t\tthis.prepare_login_panel_header();\n\t\tthis.prepare_user_list();\n\t\tthis.prepare_session_list();\n\t\tthis.prepare_system_action_buttons();\n\t\t$( \"#login\" ).addClass( \"in\" );\n\t\tthis.register_callbacks();\n\t\tthis.background_manager.setup_background_thumbnails();\n\t}\n\n\n\t/**\n\t * Register callbacks for the LDM Greeter as well as any others that haven't been registered\n\t * elsewhere.\n\t */\n\tregister_callbacks() {\n\t\tvar events = 'shown.bs.collapse, hidden.bs.collapse';\n\n\t\tthis.$user_list.parents( '.collapse' ).on( events, this.user_list_collapse_handler );\n\t\t$( document ).keydown( this.key_press_handler );\n\t\t$( '.cancel_auth' ).click( this.cancel_authentication );\n\t\t$( '.submit_passwd' ).click( this.submit_password );\n\n\t\twindow.show_prompt = this.show_prompt;\n\t\twindow.show_message = this.show_message;\n\t\twindow.start_authentication = this.start_authentication;\n\t\twindow.cancel_authentication = this.cancel_authentication;\n\t\twindow.authentication_complete = this.authentication_complete;\n\t\twindow.autologin_timer_expired = this.cancel_authentication;\n\t}\n\n\t/**\n\t * Initialize the user list.\n\t */\n\tprepare_user_list() {\n\t\tvar template;\n\n\t\t// Loop through the array of LightDMUser objects to create our user list.\n\t\tfor ( var user of lightdm.users ) {\n\t\t\tvar last_session = this.cache_get( 'user', user.name, 'session' ),\n\t\t\t\timage_src = user.image.length ? user.image : this.user_image;\n\n\t\t\tif ( null === last_session ) {\n\t\t\t\t// For backwards compatibility\n\t\t\t\tlast_session = localStorage.getItem( user.name );\n\t\t\t\tif ( null === last_session ) {\n\t\t\t\t\t// This user has never logged in before let's enable the system's default\n\t\t\t\t\t// session.\n\t\t\t\t\tlast_session = lightdm.default_session;\n\t\t\t\t}\n\t\t\t\tthis.cache_set( last_session, 'user', user.name, 'session' );\n\t\t\t}\n\n\t\t\tthis.log( `Last session for ${user.name} was: ${last_session}` );\n\n\t\t\ttemplate = `\n\t\t\t\t<a href=\"#\" id=\"${user.name}\" class=\"list-group-item ${user.name}\" data-session=\"${last_session}\">\n\t\t\t\t\t<img src=\"${image_src}\" class=\"img-circle\" alt=\"${user.display_name}\" />\n\t\t\t\t\t<span>${user.display_name}</span>\n\t\t\t\t\t<span class=\"badge\"><i class=\"fa fa-check\"></i></span>\n\t\t\t\t</a>`;\n\n\t\t\t// Register event handler here so we don't have to iterate over the users again later.\n\t\t\t$( template ).appendTo( this.$user_list ).click( this.start_authentication ).on('error.antergos', this.user_image_error_handler);\n\n\t\t} // END for ( var user of lightdm.users )\n\n\t\tif ( $( this.$user_list ).children().length > 3 ) {\n\t\t\t// Make the user list two columns instead of one.\n\t\t\t$( this.$user_list ).css( 'column-count', '2' ).parent().css( 'max-width', '85%' );\n\t\t}\n\n\t}\n\n\t/**\n\t * Initialize the session selection dropdown.\n\t */\n\tprepare_session_list() {\n\t\t// Loop through the array of LightDMSession objects to create our session list.\n\t\tfor ( var session of lightdm.sessions ) {\n\t\t\tvar css_class = session.name.replace( / /g, '' ),\n\t\t\t\ttemplate;\n\n\t\t\tthis.log( `Adding ${session.name} to the session list...` );\n\n\t\t\ttemplate = `\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"#\" data-session-id=\"${session.key}\" class=\"${css_class}\">${session.name}</a>\n\t\t\t\t</li>`;\n\n\t\t\t$( template ).appendTo( this.$session_list ).click( this.session_toggle_handler );\n\n\t\t} // END for (var session of lightdm.sessions)\n\n\t\t$( '.dropdown-toggle' ).dropdown();\n\t}\n\n\t/**\n\t * Initialize the system action buttons\n\t */\n\tprepare_system_action_buttons() {\n\t\tvar actions = {\n\t\t\t\tshutdown: \"power-off\",\n\t\t\t\thibernate: \"asterisk\",\n\t\t\t\tsuspend: \"arrow-down\",\n\t\t\t\trestart: \"refresh\"\n\t\t\t},\n\t\t\ttemplate;\n\n\t\tfor ( var action of Object.keys( actions ) ) {\n\t\t\tvar cmd = `can_${action}`;\n\n\t\t\ttemplate = `\n\t\t\t\t<a href=\"#\" id=\"${action}\" class=\"btn btn-default ${action}\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"${action.capitalize()}\" data-container=\"body\">\n\t\t\t\t\t<i class=\"fa fa-${actions[ action ]}\"></i>\n\t\t\t\t</a>`;\n\n\t\t\tif ( lightdm[ cmd ] ) {\n\t\t\t\t$( template ).appendTo( $( this.$actions_container ) ).click( this.system_action_handler );\n\t\t\t}\n\t\t} // END for (var [action, icon] of actions)\n\n\t\t$( '[data-toggle=tooltip]' ).tooltip();\n\t\t$('.modal').modal({show: false});\n\t}\n\n\tinitialize_clock() {\n\t\tvar saved_format = this.cache_get( 'clock', 'time_format' ),\n\t\t\tformat = (null !== saved_format) ? saved_format : 'LT';\n\n\t\tmoment.locale( window.navigator.languages );\n\t\tthis.$clock.html( moment().format( format ) );\n\n\t\tsetInterval( () => {\n\t\t\t_self.$clock.html( moment().format( format ) );\n\t\t}, 60000 );\n\t}\n\n\n\t/**\n\t * Show the user list if its not already shown. This is used to allow the user to\n\t * display the user list by pressing Enter or Spacebar.\n\t */\n\tshow_user_list() {\n\t\tif ( $( this.$clock_container ).hasClass( 'in' ) ) {\n\t\t\t$( '#trigger' ).trigger( 'click' );\n\t\t}\n\t\tif ( $( this.$user_list ).length <= 1 ) {\n\t\t\t$( this.$user_list ).find( 'a' ).trigger( 'click', this );\n\t\t}\n\t}\n\n\n\tprepare_login_panel_header() {\n\t\tvar greeting = (this.translations.greeting) ? this.translations.greeting : 'Welcome!',\n\t\t\tlogo = ( '' !== this.logo ) ? this.logo : 'img/antergos.png';\n\n\t\t$( '.welcome' ).text( greeting );\n\t\t$( '#hostname' ).append( lightdm.hostname );\n\t\t$('[data-greeter-config=\"logo\"]').attr('src', logo);\n\t}\n\n\n\tprepare_translations() {\n\t\tif ( ! this.translations.hasOwnProperty( this.lang ) ) {\n\t\t\tfor ( var lang of window.navigator.languages ) {\n\t\t\t\tif ( this.translations.hasOwnProperty( lang ) ) {\n\t\t\t\t\tthis.lang = lang;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif ( ! this.translations.hasOwnProperty( this.lang ) ) {\n\t\t\tthis.lang = 'en';\n\t\t}\n\n\t\tthis.translations = this.translations[ this.lang ];\n\t}\n\n\n\t/**\n\t * Replace '${i18n}' with translated string for all elements that\n\t * have the data-i18n attribute. This is for elements that are not generated\n\t * dynamically (they can be found in index.html).\n\t */\n\tdo_static_translations() {\n\t\t$( '[data-i18n]' ).each( function() {\n\t\t\tvar key = $( this ).attr( 'data-i18n' ),\n\t\t\t\thtml = $( this ).html(),\n\t\t\t\ttranslated = _self.translations[ key ],\n\t\t\t\tnew_html = html.replace( '${i18n}', translated );\n\n\t\t\t$( this ).html( new_html );\n\t\t} );\n\t}\n\n\n\t/**\n\t * Start the authentication process for the selected user.\n\t *\n\t * @param {object} event - jQuery.Event object from 'click' event.\n\t */\n\tstart_authentication( event ) {\n\t\tvar user_id = $( this ).attr( 'id' ),\n\t\t\tselector = `.${user_id}`,\n\t\t\tuser_session = _self.cache_get( 'user', user_id, 'session' );\n\n\t\tif ( _self.auth_pending || null !== _self.selected_user ) {\n\t\t\tlightdm.cancel_authentication();\n\t\t\t_self.log( `Authentication cancelled for ${_self.selected_user}` );\n\t\t\t_self.selected_user = null;\n\t\t}\n\n\t\t_self.log( `Starting authentication for ${user_id}.` );\n\t\t_self.selected_user = user_id;\n\n\t\t// CSS hack to workaround webkit bug\n\t\tif ( $( _self.$user_list ).children().length > 3 ) {\n\t\t\t$( _self.$user_list ).css( 'column-count', 'initial' ).parent().css( 'max-width', '50%' );\n\t\t}\n\t\t$( selector ).addClass( 'hovered' ).siblings().hide();\n\t\t$( '.fa-toggle-down' ).hide();\n\n\t\t_self.log( `Session for ${user_id} is ${user_session}` );\n\n\t\t$( `[data-session-id=\"${user_session}\"]` ).parent().trigger( 'click', this );\n\n\t\t$( '#session-list' ).removeClass( 'hidden' ).show();\n\t\t$( '#passwordArea' ).show();\n\t\t$( '.dropdown-toggle' ).dropdown();\n\n\t\t_self.auth_pending = true;\n\n\t\tlightdm.authenticate( user_id );\n\t}\n\n\n\t/**\n\t * Cancel the pending authentication.\n\t *\n\t * @param {object} event - jQuery.Event object from 'click' event.\n\t */\n\tcancel_authentication( event ) {\n\t\tvar selectors = [ '#statusArea', '#timerArea', '#passwordArea', '#session-list' ];\n\n\t\tfor ( var selector of selectors ) {\n\t\t\t$( selector ).hide();\n\t\t}\n\n\t\tlightdm.cancel_authentication();\n\n\t\t_self.log( 'Cancelled authentication.' );\n\n\t\t// CSS hack to work-around webkit bug\n\t\tif ( $( _self.$user_list ).children().length > 3 ) {\n\t\t\t$( _self.$user_list ).css( 'column-count', '2' ).parent().css( 'max-width', '85%' );\n\t\t}\n\n\t\t$( '.hovered' ).removeClass( 'hovered' ).siblings().show();\n\t\t$( '.fa-toggle-down' ).show();\n\n\t\t_self.selected_user = null;\n\t\t_self.auth_pending = false;\n\n\t}\n\n\n\t/**\n\t * Called when the user attempts to authenticate (inputs password).\n\t * We check to see if the user successfully authenticated and if so tell the LDM\n\t * Greeter to log them in with the session they selected.\n\t */\n\tauthentication_complete() {\n\t\tvar selected_session = $( '.selected' ).attr( 'data-session-id' ),\n\t\t\terr_msg = _self.translations.auth_failed[ _self.lang ];\n\n\t\t_self.auth_pending = false;\n\t\t_self.cache_set( selected_session, 'user', lightdm.authentication_user, 'session' );\n\n\t\t$( '#timerArea' ).hide();\n\n\t\tif ( lightdm.is_authenticated ) {\n\t\t\t// The user entered the correct password. Let's log them in.\n\t\t\t$('body').fadeOut(1000);\n\t\t\tlightdm.login( lightdm.authentication_user, selected_session );\n\t\t} else {\n\t\t\t// The user did not enter the correct password. Show error message.\n\t\t\t$( '#statusArea' ).show();\n\t\t}\n\t}\n\n\tsubmit_password( event ) {\n\t\tlightdm.respond( $( '#passwordField' ).val() );\n\t\t$( '#passwordArea' ).hide();\n\t\t$( '#timerArea' ).show();\n\t}\n\n\tsession_toggle_handler( event ) {\n\t\tvar $session = $( this ).children( 'a' ),\n\t\t\tsession_name = $session.text(),\n\t\t\tsession_key = $session.attr( 'data-session-id' );\n\n\t\t$session.parents( '.btn-group' ).find( '.selected' ).attr( 'data-session-id', session_key ).html( session_name );\n\t}\n\n\tkey_press_handler( event ) {\n\t\tvar action;\n\t\tswitch ( event.which ) {\n\t\t\tcase 13:\n\t\t\t\taction = _self.auth_pending ? _self.submit_password() : ! _self.user_list_visible ? _self.show_user_list() : 0;\n\t\t\t\t_self.log( action );\n\t\t\t\tbreak;\n\t\t\tcase 27:\n\t\t\t\taction = _self.auth_pending ? _self.cancel_authentication() : 0;\n\t\t\t\t_self.log( action );\n\t\t\t\tbreak;\n\t\t\tcase 32:\n\t\t\t\taction = (! _self.user_list_visible && ! _self.auth_pending) ? _self.show_user_list() : 0;\n\t\t\t\t_self.log( action );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsystem_action_handler() {\n\t\tvar action = $( this ).attr( 'id' ),\n\t\t\t$modal = $( '.modal' );\n\n\t\t$modal.find( '.btn-primary' ).text( _self.translations[ action ] ).click( action, ( event ) => {\n\t\t\t$( this ).off( 'click' );\n\t\t\tlightdm[ event.data ]();\n\t\t} );\n\t\t$modal.find( '.btn-default' ).click( () => {\n\t\t\t$( this ).next().off( 'click' );\n\t\t} );\n\n\t\t$modal.modal('toggle');\n\t}\n\n\n\tuser_list_collapse_handler() {\n\t\t_self.user_list_visible = _self.$user_list.hasClass( 'in' ) ? true : false;\n\t}\n\n\n\tuser_image_error_handler( event ) {\n\t\t$(this).off('error.antergos');\n\t\t$(this).attr('src', _self.tux);\n\t}\n\n\n\t/**\n\t * LightDM Callback - Show password prompt to user.\n\t *\n\t * @param text\n\t * @param type\n\t */\n\tshow_prompt( text, type ) {\n\t\tif ( 'password' === type ) {\n\t\t\t$( '#passwordField' ).val( \"\" );\n\t\t\t$( '#passwordArea' ).show();\n\t\t\t$( '#passwordField' ).focus();\n\t\t}\n\t}\n\n\t/**\n\t * LightDM Callback - Show message to user.\n\t *\n\t * @param text\n\t */\n\tshow_message( text, type ) {\n\t\tif ( text.length > 0 ) {\n\t\t\t$( this.$msg_area ).html( text );\n\t\t\t$( '#passwordArea' ).hide();\n\t\t\t$( this.$msg_area_container ).show();\n\t\t}\n\t}\n}\n\n\n/**\n * Initialize the theme once the window has loaded.\n */\n$( window ).load( () => {\n\t_self = new AntergosTheme();\n} );\n\n"]}